<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Gallery
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="refresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">
        Gallery
      </ion-title>
    </ion-toolbar>
  </ion-header> -->

<!-- <rx-virtual-scroll-viewport [itemSize]="rowSize">
    <ion-grid [fixed]="true" [ngStyle]="{'padding': '0px'}">
      <ion-row *rxVirtualFor="let imageRows of imagesGrid"
        [ngStyle]="{'width': '100%', 'height': rowSize + 'px', 'padding': '0px', 'overflow': 'hidden'}">
        <ion-col *ngFor="let imageCol of imageRows" [ngStyle]="{'margin': '1px'}">
          <app-image [image]="imageCol" />
        </ion-col>
      </ion-row>
    </ion-grid>
  </rx-virtual-scroll-viewport> -->
<!-- <div style="position: absolute; top:0; left:0; width:100%; height:100%; pointer-events:none"> -->
<!-- <rx-virtual-scroll-viewport [itemSize]="rowSize" [ngStyle]="{'scroll-behavior': 'smooth', 'display': 'flex', 'flex-flow': 'row wrap', 'flex': '0 0
    200px', 'justify-content': 'center', 'align-items': 'center', 'width': '100%'}">
    <div *rxVirtualFor="let image of images">
      <app-image [image]=" image" />
    </div>
  </rx-virtual-scroll-viewport>
  <div style="position: absolute; top:0; left:0; width:100%; height:100%; pointer-events:none"></div> -->
<!-- </div> -->

<!-- NOTE: I could try to put all of this into one image gallery/wall component where in that component all
  ngOptimized stuff is directly used without further sub component nesting. (My assumption is, that this component
  nesting is slowing things down because angular might do some component updating in the background... -> this might
  also be the reason for the still sometimes occurring warning: "... has detected that the height of the fill-mode is
  zero. ...".) -->


<!-- <rx-virtual-scroll-viewport id="viewportXYZ" [itemSize]="rowSize" minBufferPx="10000" maxBufferPx="10000" [ngStyle]="{'scroll-behavior': 'smooth', 'display': 'flex', 'flex-flow': 'row wrap', 'flex': '0 0
    200px', 'justify-content': 'center', 'align-items': 'center', 'width': '100%', 'height': '800px'}">
    <div *rxVirtualFor="let image of images">
      <div [ngStyle]="{'position': 'relative', 'width': '100px', 'height': '100px'}">
        <img [ngSrc]="image.filepath" width="100" height="100" transform="{w:100, h:100, cm: 'pad_resize', ar: '1:1'}"
          [placeholder]=placeholder loading="lazy" />
      </div>
    </div>
  </rx-virtual-scroll-viewport> -->

<!-- <div *ngIf="images">
    <li-virtual-scroll [items]="images" [gridList]="true">
      <div *liVirtualItem="let image">
        <img [ngSrc]="image.filepath" width="100" height="100" [placeholder]=placeholder loading="lazy" />
      </div>
    </li-virtual-scroll>
  </div> -->

<!-- <div *ngIf="images">
    <li-virtual-scroll [items]="images" [gridList]="true" [itemWidth]="100" [itemHeight]="100">
      <div *liVirtualItem="let image" style="position: relative; width: 100px; height: 100px;">
        <img [ngSrc]="image.filepath" width="100" height="100" [placeholder]=placeholder loading="lazy" />
      </div>
    </li-virtual-scroll>
  </div> -->



<ion-content [fullscreen]="true">
  <div *ngIf="images">
    <li-virtual-scroll [items]="images" [bufferLength]="1000" [asyncRendering]="true">
      <!-- <img *liVirtualItem="let image" [ngSrc]="image.filepath" width="100" height="100" [placeholder]=placeholder
        loading="lazy" /> -->
      <img *liVirtualItem="let image" [ngSrc]="image.filepath" width="100" height="100" loading="lazy" />

      <img *liVirtualPlaceholder="let image" placeholder="placeholder" />
    </li-virtual-scroll>
  </div>

</ion-content>